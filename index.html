<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Import American Cars Arica | Veh√≠culos Americanos Premium</title>
    <meta name="description" content="Importamos los veh√≠culos americanos m√°s ic√≥nicos para que escribas tu propia historia en el desierto m√°s extenso del mundo.">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://importamericancars.cl/">
    <meta property="og:title" content="Import American Cars Arica | Veh√≠culos Americanos Premium">
    <meta property="og:description" content="Importamos los veh√≠culos americanos m√°s ic√≥nicos para que escribas tu propia historia en el desierto m√°s extenso del mundo.">
    <meta property="og:image" content="https://res.cloudinary.com/df2gprqhp/image/upload/v1765988412/CHEVROLET_yjwbxt.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://importamericancars.cl/">
    <meta property="twitter:title" content="Import American Cars Arica | Veh√≠culos Americanos Premium">
    <meta property="twitter:description" content="Importamos los veh√≠culos americanos m√°s ic√≥nicos para que escribas tu propia historia en el desierto m√°s extenso del mundo.">
    <meta property="twitter:image" content="https://res.cloudinary.com/df2gprqhp/image/upload/v1765988412/CHEVROLET_yjwbxt.jpg">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Cargando aplicaci√≥n...</div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <a href="#" class="logo-link">
                    <div class="logo-icon">
                        <i class="fas fa-car"></i>
                    </div>
                    <div class="logo-text">
                        <span>IMPORT AMERICAN CARS</span>
                        <small>Arica</small>
                    </div>
                </a>
            </div>
            
            <nav class="nav">
                <ul class="nav-links">
                    <li>
                        <a href="#vehiculos" class="nav-link">Veh√≠culos</a>
                    </li>
                    <li>
                        <a href="#nosotros" class="nav-link">Nosotros</a>
                    </li>
                    <li>
                        <a href="#contacto" class="nav-link">Contacto</a>
                    </li>
                </ul>
            </nav>
            
            <div class="header-actions">
                <a href="https://wa.me/56938654827" target="_blank" class="button button-small button-whatsapp">
                    <i class="fab fa-whatsapp"></i>
                    <span>Contactar</span>
                </a>
                
                <button id="menuToggle" class="menu-toggle" aria-label="Men√∫">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu">
        <nav class="mobile-nav">
            <ul>
                <li><a href="#vehiculos" class="mobile-nav-link">Veh√≠culos</a></li>
                <li><a href="#nosotros" class="mobile-nav-link">Nosotros</a></li>
                <li><a href="#contacto" class="mobile-nav-link">Contacto</a></li>
            </ul>
        </nav>
        
        <div class="mobile-contact">
            <a href="https://wa.me/56938654827" target="_blank" class="button button-whatsapp">
                <i class="fab fa-whatsapp"></i>
                <span>Contactar por WhatsApp</span>
            </a>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-tagline">El desierto merece su leyenda.</div>
                <h1 class="hero-title">Veh√≠culos Americanos en Arica</h1>
                <p class="hero-subtitle">
                    Importamos los veh√≠culos m√°s ic√≥nicos de Estados Unidos para que escribas tu propia historia 
                    en el desierto m√°s extenso del mundo.
                </p>
                
                <div class="stock-indicators">
                    <div class="indicator" onclick="window.UIManager?.filtrarVehiculos('all')">
                        <div class="indicator-icon">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <div class="indicator-number" id="totalCount">0</div>
                        <div class="indicator-label">Veh√≠culos</div>
                    </div>
                    <div class="indicator" onclick="window.UIManager?.filtrarVehiculos('stock')">
                        <div class="indicator-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="indicator-number" id="stockCount">0</div>
                        <div class="indicator-label">En Stock</div>
                    </div>
                    <div class="indicator" onclick="window.UIManager?.filtrarVehiculos('transit')">
                        <div class="indicator-icon">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                        <div class="indicator-number" id="transitCount">0</div>
                        <div class="indicator-label">En Tr√°nsito</div>
                    </div>
                    <div class="indicator" onclick="window.UIManager?.filtrarVehiculos('reserved')">
                        <div class="indicator-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="indicator-number" id="reservedCount">0</div>
                        <div class="indicator-label">Para Reservar</div>
                    </div>
                </div>
                
                <div class="hero-cta">
                    <a href="#vehiculos" class="btn-apple">
                        <i class="fas fa-car"></i>
                        Ver Veh√≠culos
                    </a>
                    <a href="https://wa.me/56938654827" target="_blank" class="button button-whatsapp">
                        <i class="fab fa-whatsapp"></i>
                        Consultar Disponibilidad
                    </a>
                </div>
                
                <div class="explore-arrow" onclick="window.UIManager?.smoothScrollTo('vehiculos')">
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </div>
    </section>

    <!-- Filters Section -->
    <section id="vehiculos" class="section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Nuestros Veh√≠culos</h2>
                <p class="section-subtitle">Selecciona por disponibilidad</p>
            </div>
            
            <div class="filter-buttons">
                <button class="filter-button active" data-filter="all" aria-pressed="true">
                    <i class="fas fa-layer-group"></i>
                    <span>Todos</span>
                    <span class="filter-count">(<span id="filterCount">0</span>)</span>
                </button>
                <button class="filter-button" data-filter="stock" aria-pressed="false">
                    <i class="fas fa-check-circle"></i>
                    <span>En Stock Arica</span>
                </button>
                <button class="filter-button" data-filter="transit" aria-pressed="false">
                    <i class="fas fa-shipping-fast"></i>
                    <span>En Tr√°nsito</span>
                </button>
                <button class="filter-button" data-filter="reserved" aria-pressed="false">
                    <i class="fas fa-calendar-check"></i>
                    <span>Para Reservar</span>
                </button>
            </div>
            
            <div class="filter-actions mt-4">
                <button class="button button-small button-outline" id="refreshButton">
                    <i class="fas fa-sync-alt"></i>
                    Actualizar
                </button>
            </div>
        </div>
    </section>

    <!-- Vehicles Grid -->
    <section class="vehicles-section section">
        <div class="container">
            <div id="vehiclesContainer" class="vehicles-grid">
                <!-- Los veh√≠culos se cargar√°n aqu√≠ din√°micamente -->
                <div class="loading-placeholder">
                    <div class="loading-spinner">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p>Cargando veh√≠culos...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="nosotros" class="section kits-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Import American Cars Arica</h2>
                <p class="section-subtitle">
                    Somos especialistas en la importaci√≥n de veh√≠culos americanos de alta gama. 
                    Nuestro compromiso es traerte los modelos m√°s ic√≥nicos y deseados, directamente 
                    desde Estados Unidos hasta Arica.
                </p>
            </div>
            
            <div class="kits-grid">
                <div class="kit-card">
                    <div class="kit-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 class="kit-title">Selecci√≥n Rigurosa</h3>
                    <p class="kit-description">
                        Cada veh√≠culo pasa por una rigurosa inspecci√≥n antes de ser importado.
                    </p>
                </div>
                
                <div class="kit-card">
                    <div class="kit-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="kit-title">Garant√≠a Incluida</h3>
                    <p class="kit-description">
                        Todos nuestros veh√≠culos incluyen garant√≠a y respaldo post-venta.
                    </p>
                </div>
                
                <div class="kit-card">
                    <div class="kit-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <h3 class="kit-title">Kits Personalizaci√≥n</h3>
                    <p class="kit-description">
                        Ofrecemos kits de upgrade para adaptar cada veh√≠culo a tus necesidades.
                    </p>
                </div>
                
                <div class="kit-card">
                    <div class="kit-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3 class="kit-title">Soporte 24/7</h3>
                    <p class="kit-description">
                        Asesoramiento personalizado antes, durante y despu√©s de la compra.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contacto" class="section contact-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Cont√°ctanos</h2>
                <p class="section-subtitle">Estamos aqu√≠ para ayudarte a encontrar el veh√≠culo perfecto</p>
            </div>
            
            <div class="contact-buttons">
                <a href="https://wa.me/56938654827" target="_blank" class="button button-whatsapp button-large">
                    <i class="fab fa-whatsapp"></i>
                    WhatsApp
                </a>
                <a href="https://www.instagram.com/import_american_cars" target="_blank" class="button button-instagram button-large">
                    <i class="fab fa-instagram"></i>
                    Instagram
                </a>
                <a href="mailto:contacto@importamericancars.cl" class="button button-outline button-large">
                    <i class="fas fa-envelope"></i>
                    Email
                </a>
            </div>
            
            <div class="contact-info">
                <p>
                    <i class="fab fa-whatsapp"></i>
                    <a href="https://wa.me/56938654827" target="_blank">+56 9 3865 4827</a>
                </p>
                <p>
                    <i class="fab fa-instagram"></i>
                    <a href="https://www.instagram.com/import_american_cars" target="_blank">@import_american_cars</a>
                </p>
                <p>
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:contacto@importamericancars.cl">contacto@importamericancars.cl</a>
                </p>
                <p>
                    <i class="fas fa-map-marker-alt"></i>
                    Zona Franca Arica, Chile
                </p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-car"></i>
                    </div>
                    <div class="logo-text">
                        <span>IMPORT AMERICAN CARS</span>
                        <small>Arica</small>
                    </div>
                </div>
                <p class="footer-tagline">El desierto merece su leyenda.</p>
            </div>
            
            <div class="footer-links">
                <a href="#vehiculos" class="footer-link">Veh√≠culos</a>
                <a href="#nosotros" class="footer-link">Nosotros</a>
                <a href="#contacto" class="footer-link">Contacto</a>
                <a href="https://wa.me/56938654827" target="_blank" class="footer-link">WhatsApp</a>
                <a href="https://www.instagram.com/import_american_cars" target="_blank" class="footer-link">Instagram</a>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Import American Cars Arica. Todos los derechos reservados.</p>
                <p class="footer-tagline">v2.0.0</p>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <div id="vehicleModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle" class="modal-title">Detalles del Veh√≠culo</h2>
                <button id="closeVehicleModal" class="close-modal" aria-label="Cerrar modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="vehicleModalContent">
                    <!-- El contenido se cargar√° din√°micamente -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="button button-outline" onclick="UIManager.closeModal('vehicleModal')">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <div id="customizationModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="customizationTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="customizationTitle" class="modal-title">Personalizar Veh√≠culo</h2>
                <button id="closeCustomizationModal" class="close-modal" aria-label="Cerrar modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="customizationContent">
                    <!-- El contenido se cargar√° din√°micamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Main App Initialization -->
    <script type="module">
        async function initializeApp() {
            console.log('üöÄ Inicializando aplicaci√≥n...');
            
            const loadingOverlay = document.getElementById('loadingOverlay');
            
            try {
                // 1. Cargar m√≥dulos en orden
                const { CONFIG } = await import('./js/config.js');
                window.CONFIG = CONFIG;
                
                const { SupabaseService } = await import('./js/supabase-service.js');
                window.SupabaseService = SupabaseService;
                
                const { ProductosManager } = await import('./js/productos-manager.js');
                window.ProductosManager = ProductosManager;
                
                const { UICore, UINotifications } = await import('./js/ui-core.js');
                window.UICore = UICore;
                window.UINotifications = UINotifications;
                
                const { UISlider, UIModals, UIKits } = await import('./js/ui-components.js');
                window.UISlider = UISlider;
                window.UIModals = UIModals;
                window.UIKits = UIKits;
                
                const { UIManager } = await import('./js/ui-manager.js');
                window.UIManager = UIManager;
                
                // 2. Inicializar UIManager
                await UIManager.init({
                    autoInitSlider: true
                });
                
                // 3. Crear instancia de ProductosManager
                window.productosManager = new ProductosManager(CONFIG);
                
                // 4. Configurar eventos
                setupEventListeners();
                
                // 5. Ocultar loading
                if (loadingOverlay) {
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 300);
                }
                
                // 6. Notificaci√≥n de √©xito
                setTimeout(() => {
                    if (window.UINotifications) {
                        UINotifications.success('Aplicaci√≥n cargada correctamente', 3000);
                    }
                }, 1000);
                
            } catch (error) {
                console.error('‚ùå Error inicializando la aplicaci√≥n:', error);
                handleError(error);
                
                // Forzar ocultar loading en caso de error
                if (loadingOverlay) {
                    loadingOverlay.style.display = 'none';
                }
            }
        }
        
        function setupEventListeners() {
            // Filtros
            document.querySelectorAll('.filter-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const filter = this.dataset.filter;
                    if (window.productosManager) {
                        window.productosManager.filtrarVehiculos(filter);
                    }
                });
            });
            
            // Bot√≥n refresh
            const refreshButton = document.getElementById('refreshButton');
            if (refreshButton) {
                refreshButton.addEventListener('click', () => {
                    if (window.productosManager) {
                        window.productosManager.cargarVehiculos(true);
                    }
                });
            }
            
            // Men√∫ m√≥vil (manejado por UICore)
        }
        
        function handleError(error) {
            const vehiclesContainer = document.getElementById('vehiclesContainer');
            if (vehiclesContainer) {
                vehiclesContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h3 class="empty-state-title">Error al cargar</h3>
                        <p class="empty-state-message">
                            Hubo un problema al cargar los veh√≠culos.<br>
                            Por favor, recarga la p√°gina o contacta con soporte.
                        </p>
                        <div class="empty-state-actions">
                            <button class="button" onclick="location.reload()">
                                <i class="fas fa-redo"></i> Recargar p√°gina
                            </button>
                            <a href="https://wa.me/56938654827" target="_blank" class="button button-outline">
                                <i class="fab fa-whatsapp"></i> Contactar soporte
                            </a>
                        </div>
                    </div>
                `;
            }
        }
        
        // Iniciar cuando el DOM est√© listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
</body>
</html>
